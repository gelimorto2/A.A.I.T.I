# AAITI Docker Environment Configuration
# Copy this file to .env for custom configuration

# === APPLICATION SETTINGS ===
NODE_ENV=production
PORT=5000
LOG_LEVEL=info

# === DATABASE CONFIGURATION ===
DB_PATH=/app/data/aaiti.sqlite
SQLITE_CACHE_SIZE=10000
SQLITE_JOURNAL_MODE=WAL
SQLITE_SYNCHRONOUS=NORMAL
SQLITE_TEMP_STORE=MEMORY
SQLITE_MMAP_SIZE=268435456
SQLITE_PAGE_SIZE=4096

# === PERFORMANCE OPTIMIZATIONS ===
# Node.js Performance
UV_THREADPOOL_SIZE=16
NODE_OPTIONS=--max-old-space-size=2048 --max-semi-space-size=64
NPM_CONFIG_UPDATE_NOTIFIER=false
FORCE_COLOR=0

# Server Performance
MAX_CONNECTIONS=1000
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000
REQUEST_TIMEOUT=300000
BODY_LIMIT=50mb
COMPRESSION_LEVEL=6

# === API CONFIGURATION ===
# Rate Limiting
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX=1000
CONCURRENT_REQUESTS=50
QUEUE_TIMEOUT=30000

# === CACHING SETTINGS ===
# Memory Cache
CACHE_TTL=300
CACHE_MAX_ITEMS=10000
CACHE_MAX_MEMORY=134217728
CACHE_CHECK_PERIOD=120

# Redis (if enabled)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PREFIX=aaiti:
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# === WEBSOCKET CONFIGURATION ===
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000
WS_UPGRADE_TIMEOUT=10000
WS_MAX_BUFFER_SIZE=1048576
WS_COMPRESSION=true
WS_COMPRESSION_THRESHOLD=1024

# === MARKET DATA SETTINGS ===
MARKET_DATA_BATCH_SIZE=10
MARKET_DATA_REQUEST_DELAY=1000
MARKET_DATA_MAX_RETRIES=3
MARKET_DATA_TIMEOUT=15000
MARKET_DATA_CACHE_TTL=60
MARKET_DATA_CACHE_SIZE=1000

# === LOGGING CONFIGURATION ===
LOG_MAX_FILES=5
LOG_MAX_SIZE=10m
LOG_COLORIZE=false
LOG_TIMESTAMP=true
LOG_REQUESTS=true
LOG_SQL_QUERIES=false
LOG_CACHE_HITS=false

# === SECURITY SETTINGS ===
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=24h
JWT_ISSUER=aaiti
JWT_AUDIENCE=aaiti-users
CSP_ENABLED=true
HSTS_ENABLED=true
NO_SNIFF=true

# === MONITORING SETTINGS ===
HEALTH_CHECK_INTERVAL=30000
COLLECT_METRICS=true
METRICS_PATH=/api/metrics
MONITOR_MEMORY=true
MONITOR_CPU=true
MONITOR_DATABASE=true

# === DEVELOPMENT SETTINGS (Development mode only) ===
CHOKIDAR_USEPOLLING=true
WATCHPACK_POLLING=true

# === EXTERNAL SERVICES ===
# CoinGecko API (no key required)
COINGECKO_API_URL=https://api.coingecko.com/api/v3
COINGECKO_REQUEST_DELAY=1100

# Email notifications (optional)
EMAIL_ENABLED=false
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=
EMAIL_PASS=

# Webhook notifications (optional)
WEBHOOK_ENABLED=true
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=1000
WEBHOOK_TIMEOUT=10000